#!/usr/bin/env bash
###############################################################################
# notes-app-list
#
# Usage:
#   notes-app-list <folder name>
###############################################################################

_main() {
  local _folder_name="${1:-}"
  if [[ -z "${_folder_name:-}" ]]
  then
    _folder_name="notes.sh"
  fi
  local _script=

  read -r -d '' _script <<HEREDOC
tell application "Notes"
  tell account "iCloud"
    set myFolder to first folder whose name = "${_folder_name}"
    set myNotes to notes of myFolder
    set myCounter to 0

    repeat with theNote in myNotes
      tell theNote
        set myCounter to myCounter + 1
        set noteContainer to get container
        set noteId to get id
        set notePasswordProtected to get password protected
        set noteCreationDate to get creation date
        set noteModificationDate to get modification date
        set noteName to get name
        set noteBody to get body

        log myCounter
        log noteContainer
        log noteId
        log notePasswordProtected
        log noteCreationDate
        log noteModificationDate
        log noteName
        log noteBody
      end tell
    end repeat
  end tell
end tell
HEREDOC
  osascript -e "${_script}"
} && _main "${@:-}"
